(this["webpackJsonpyour-app"]=this["webpackJsonpyour-app"]||[]).push([[0],{235:function(e,t){},246:function(e,t,s){},451:function(e,t,s){"use strict";s.r(t);var i=s(2),c=s(1),r=s.n(c),o=s(19),n=s.n(o),l=(s(243),s(244),s(245),s(246),s(45)),a=s(14),j=s(4),d=s(7),h=s(99);s(452),s(270);const b={apiKey:"AIzaSyDgUKSulrYq50m8_Tle1uvLsH_LZV7Mlss",authDomain:"secondlove-cc51b.firebaseapp.com",projectId:"secondlove-cc51b",storageBucket:"secondlove-cc51b.appspot.com",messagingSenderId:"1046105738786",appId:"1:1046105738786:web:e8dbd8bc929024205f447b",measurementId:"G-EXKKW36RRM"};h.a.initializeApp(b),h.a.firestore();var p=h.a;var m=s(18);class O extends c.Component{constructor(...e){super(...e),this.state={collapseID:""},this.toggleCollapse=e=>()=>this.setState((t=>({collapseID:t.collapseID!==e?e:""}))),this.closeCollapse=e=>()=>{const t=this.state.collapseID;window.scrollTo(0,0),t===e&&this.setState({collapseID:""})}}render(){this.toggleCollapse("mainNavbarCollapse");const e=this.state.collapseID;return Object(i.jsx)("div",{children:Object(i.jsxs)(j.y,{color:"rgba-pink-strong",dark:!0,expand:"md",fixed:"top",scrolling:!0,children:[Object(i.jsxs)(j.z,{href:"/",className:"py-0 font-weight-bold",children:[Object(i.jsx)(j.r,{fab:!0,icon:"gratipay",style:{height:"1.5rem",width:"1.5rem"}}),Object(i.jsx)("strong",{className:"align-middle",children:"SecondLove"})]}),Object(i.jsx)(j.B,{onClick:this.toggleCollapse("mainNavbarCollapse")}),Object(i.jsx)(j.o,{id:"mainNavbarCollapse",isOpen:e,navbar:!0,children:Object(i.jsxs)(j.A,{right:!0,children:[Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/signup",children:Object(i.jsx)("strong",{children:"Signup"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/login",children:Object(i.jsx)("strong",{children:"Login"})})})]})})]})})}}var x=O;class u extends c.Component{render(){return Object(i.jsx)("div",{children:Object(i.jsx)(j.q,{color:"rgba-pink-strong",children:Object(i.jsxs)("p",{className:"footer-copyright mb-0 py-3 text-center",children:["\xa9 ",(new Date).getFullYear()," Copyright:",Object(i.jsx)("a",{href:"https://www.MDBootstrap.com",children:" MDBootstrap.com "})]})})})}}var g=s(11),v=s(17);class C extends c.Component{constructor(...e){super(...e),this.state={email:"",password:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=()=>{const e={email:this.state.email,password:this.state.password};this.props.loginUser(e)}}componentWillReceiveProps(e){if(e.logintoken.token){localStorage.setItem("token",e.logintoken.token),localStorage.setItem("username",this.state.email);let t=this.props.userlist.filter((e=>e.email==this.state.email));localStorage.getItem("username")&&(localStorage.setItem("userhandle",t[0].handle),localStorage.setItem("userid",t[0].userId),localStorage.setItem("image",t[0].imageUrl)),localStorage.setItem("usertype","Normal User"),this.props.history.push("/")}else e.logintoken.error&&(this.setState({email:"",password:""}),alert(e.logintoken.error))}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(x,{}),Object(i.jsxs)(j.p,{children:[Object(i.jsx)("br",{}),Object(i.jsx)(j.E,{children:Object(i.jsxs)(j.n,{md:"12",children:[Object(i.jsx)("h3",{className:"pink-text",children:"Welcome to SecondLove"}),Object(i.jsx)("hr",{}),Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:"grey-text",children:[Object(i.jsx)(j.t,{label:"Email Address",id:"email",icon:"envelope",onChange:this.handleChange,group:!0,type:"email",validate:!0,error:"wrong",success:"right",value:this.state.email}),Object(i.jsx)(j.t,{label:"Password",icon:"lock",group:!0,type:"password",onChange:this.handleChange,id:"password",validate:!0,value:this.state.password})]}),Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)(j.c,{onClick:this.handleSubmit,color:"red",size:"lg",children:"Login"}),Object(i.jsx)("p",{}),Object(i.jsxs)("p",{children:[" ",Object(i.jsx)("a",{href:"http://localhost:3000/signup",children:"Click here to sign up if don't have an account"})]})]})]})]})})]}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var f=Object(g.d)(Object(m.b)((e=>({logintoken:e.user.response,userlist:e.firestore.ordered.users})),{loginUser:e=>t=>{fetch("https://us-central1-secondlove-cc51b.cloudfunctions.net/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw e;return e.json()})).then((e=>t({type:"SET_AUTHENTICATED",payload:e}))).catch((e=>{e.json().then((e=>{t({type:"SET_AUTHENTICATED",payload:e})}))}))}}),Object(v.firestoreConnect)([{collection:"users"}]))(C);var y=()=>Object(i.jsx)(j.p,{children:Object(i.jsx)(j.j,{activeItem:1,length:3,showControls:!0,showIndicators:!0,className:"z-depth-1",children:Object(i.jsxs)(j.l,{children:[Object(i.jsx)(j.m,{itemId:"1",children:Object(i.jsx)(j.J,{children:Object(i.jsx)("img",{className:"d-block w-100",src:"https://mdbootstrap.com/img/Photos/Slides/img%20(130).jpg",alt:"First slide"})})}),Object(i.jsx)(j.m,{itemId:"2",children:Object(i.jsx)(j.J,{children:Object(i.jsx)("img",{className:"d-block w-100",src:"https://mdbootstrap.com/img/Photos/Slides/img%20(129).jpg",alt:"Second slide"})})}),Object(i.jsx)(j.m,{itemId:"3",children:Object(i.jsx)(j.J,{children:Object(i.jsx)("img",{className:"d-block w-100",src:"https://mdbootstrap.com/img/Photos/Slides/img%20(70).jpg",alt:"Third slide"})})})]})})});class I extends c.Component{render(){return Object(i.jsx)(j.p,{children:Object(i.jsxs)(j.E,{children:[Object(i.jsxs)(j.n,{size:"8",children:[Object(i.jsx)("h2",{children:"Listing "}),Object(i.jsx)(y,{}),Object(i.jsx)("h5",{children:"Item description"})]}),Object(i.jsx)(j.n,{size:"4",children:Object(i.jsx)(j.c,{color:"unique",size:"lg",children:"Request"})})]})})}}var S=I,w=s(235),k=s.n(w);class N extends c.Component{constructor(...e){super(...e),this.state={collapseID:"",username:localStorage.getItem("username")},this.toggleCollapse=e=>()=>this.setState((t=>({collapseID:t.collapseID!==e?e:""}))),this.closeCollapse=e=>()=>{const t=this.state.collapseID;window.scrollTo(0,0),t===e&&this.setState({collapseID:""})}}componentDidMount(){this.state.username||this.props.navigate()}render(){const e=this.state.collapseID;this.toggleCollapse("mainNavbarCollapse");return Object(i.jsx)("div",{children:Object(i.jsxs)(j.y,{color:"rgba-pink-strong",dark:!0,expand:"md",fixed:"top",scrolling:!0,children:[Object(i.jsxs)(j.z,{href:"/",className:"py-0 font-weight-bold",children:[Object(i.jsx)(j.r,{fab:!0,icon:"gratipay",style:{height:"1.5rem",width:"1.5rem"}}),Object(i.jsx)("strong",{className:"align-middle",children:"SecondLove"})]}),Object(i.jsx)(j.B,{onClick:this.toggleCollapse("mainNavbarCollapse")}),Object(i.jsx)(j.o,{id:"mainNavbarCollapse",isOpen:e,navbar:!0,children:Object(i.jsxs)(j.A,{right:!0,children:[Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{exact:!0,to:"/",onClick:this.closeCollapse("mainNavbarCollapse"),children:Object(i.jsx)("strong",{children:"Home"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/profile",children:Object(i.jsx)("strong",{children:"Profile"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/status",children:Object(i.jsx)("strong",{children:"My Orders"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/donation",children:Object(i.jsx)("strong",{children:"Donation"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/approval",children:Object(i.jsx)("strong",{children:"Approval"})})}),Object(i.jsx)(j.w,{children:Object(i.jsx)(j.x,{onClick:this.closeCollapse("mainNavbarCollapse"),to:"/logout",children:Object(i.jsx)("strong",{children:"Logout"})})})]})})]})})}}var E=N,D=s(98);const T=({text:e})=>Object(i.jsxs)("div",{children:[" ",Object(i.jsx)("img",{src:"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png",height:"50",width:"50",alt:""}),e]});class A extends c.Component{render(){return Object(i.jsx)("div",{style:{height:"70vh",width:"100%"},children:Object(i.jsx)(D.a,{bootstrapURLKeys:{key:"AIzaSyA7UYITtdux3_kJzsFhO8r5Mom0bfXgyXU"},defaultCenter:this.props.center,defaultZoom:this.props.zoom,children:Object(i.jsx)(T,{lat:this.props.lat,lng:this.props.long,text:this.props.name})})})}}A.defaultProps={center:{lat:1.29,lng:103.85},zoom:11};var U=A;class R extends c.Component{constructor(...e){super(...e),this.state={form:{file:[]}},this.onChangeHandleFile=e=>{console.log(e.target.files[0]);var t=e.target.files[0],s=new FileReader;s.readAsDataURL(t),s.addEventListener("load",(()=>{this.setState((e=>Object(d.a)(Object(d.a)({},e),{},{form:{file:[s.result]}})));const e=s.result;this.props.picUpload(e)}),!1)}}render(){return Object(i.jsx)(j.u,{id:"file",inputs:Object(i.jsxs)("div",{className:"custom-file",children:[Object(i.jsx)("input",{onChange:this.onChangeHandleFile,type:"file",className:"custom-file-input",id:"inputGroupFile01"}),Object(i.jsx)("label",{className:"custom-file-label",htmlFor:"inputGroupFile01",children:"Choose file"})]}),containerClassName:"mb-3"})}}const P=e=>t=>{p.firestore().collection("requests").add(Object(d.a)({},e)),t({type:"ITEM_REQUEST"})};class L extends c.Component{constructor(...e){super(...e),this.state={file:"",lat:"",long:"",categories:["home and living","sports","electronic","toys","clothes","luxury","utomobile"],category:"",name:"",description:"",location:"",itemCondition:""},this.PictureUploaded=e=>{console.log(e),this.setState((t=>Object(d.a)(Object(d.a)({},t),{},{file:e})))},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.GoBack=()=>{this.props.history.push("/")},this.handleChangeMap=e=>{var t=this.props.collectionlist.filter((t=>t.Name==e.target.value));this.setState({[e.target.id]:e.target.value,lat:t[0].Coordinates._lat,long:t[0].Coordinates._long})},this.handleSubmit=()=>{var e=new Date;const t={approved:!1,ballotTime:"",category:this.state.category?this.state.category:"home and living",createdAt:e.toJSON(),description:this.state.description,imageUrl:this.state.file,itemCondition:this.state.itemCondition,itemName:this.state.name,itemStatus:"pendingApproval",location:this.state.location,requestCount:0,userHandle:localStorage.getItem("username"),recipient:""};this.props.donateItem(t),alert("Thank you for your donation!"),this.setState({file:"",lat:"",long:"",category:"",name:"",description:"",location:"",itemCondition:""})}}componentDidMount(){}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{}),Object(i.jsxs)(j.p,{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(j.E,{children:[Object(i.jsx)(j.n,{children:Object(i.jsx)(j.b,{type:"slideInLeft",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Donation"}),Object(i.jsx)("hr",{}),Object(i.jsxs)(j.n,{"col-md-1":!0,children:[Object(i.jsx)(j.t,{id:"name",label:"Item name",type:"text",value:this.state.name,onChange:this.handleChange,validate:!0,error:"wrong"}),Object(i.jsx)(j.t,{id:"description",type:"textarea",value:this.state.description,onChange:this.handleChange,label:"Enter the item description here",rows:"5"}),Object(i.jsx)("h6",{children:"Item Condition"}),Object(i.jsxs)("select",{placeholder:!0,class:"browser-default custom-select",value:this.state.location,id:"itemCondition",onChange:this.handleChange,children:[Object(i.jsx)("option",{value:"WellUsed",children:"Well Used"}),Object(i.jsx)("option",{value:"SlightlyUsed",children:"Slightly Used"}),Object(i.jsx)("option",{value:"New",children:"New"})]}),Object(i.jsx)("h6",{children:"Select Category"}),Object(i.jsx)("select",{placeholder:!0,class:"browser-default custom-select",value:this.state.category,id:"category",onChange:this.handleChange,children:this.state.categories.map((e=>Object(i.jsx)("option",{value:e,children:e})))}),Object(i.jsx)("p",{}),Object(i.jsx)("h6",{children:"Upload Image"}),Object(i.jsx)(R,{id:"image",picUpload:this.PictureUploaded})]}),Object(i.jsx)("img",{src:this.state.file,width:"500",height:"500"})]})})}),Object(i.jsx)(j.n,{children:Object(i.jsxs)(j.b,{type:"slideInRight",children:[Object(i.jsxs)(j.E,{children:[Object(i.jsx)("h3",{children:"Map Location"}),Object(i.jsx)("hr",{}),Object(i.jsx)(U,{lat:this.state.lat,long:this.state.long,name:this.state.location})]}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsxs)(j.E,{children:[Object(i.jsx)("h6",{children:"Select Drop-off Location"}),Object(i.jsx)("hr",{}),Object(i.jsx)("select",{class:"browser-default custom-select",id:"location",value:this.state.location,onChange:this.handleChangeMap,children:this.props.collectionlist&&this.props.collectionlist.map((e=>Object(i.jsx)("option",{value:e.Name,children:e.Name})))}),"Name: ",this.state.location,"  ",Object(i.jsx)("br",{}),"Lat: ",this.state.lat," ",Object(i.jsx)("br",{}),"Long: ",this.state.long]})]})})]}),Object(i.jsx)(j.c,{outline:!0,color:"pink",onClick:this.handleSubmit,children:"Upload "}),Object(i.jsx)(j.c,{outline:!0,color:"green",onClick:this.GoBack,children:" Back"})]}),Object(i.jsx)(u,{})]})}}var z=Object(g.d)(Object(m.b)((e=>({itemlist:e.firestore.ordered.items,collectionlist:e.firestore.ordered.collectionpoint})),{donateItem:e=>(t,s,{getFirebase:i,getFirestore:c})=>{c().collection("items").add(Object(d.a)({},e)).then((()=>{t({type:"ADD_ITEM"})}))}}),Object(v.firestoreConnect)([{collection:"items"},{collection:"collectionpoint"}]))(L);var F=({post:e,viewItem:t})=>Object(i.jsxs)(j.n,{children:[Object(i.jsxs)(j.d,{style:{width:"22rem"},children:[Object(i.jsx)(j.f,{children:Object(i.jsxs)(j.E,{children:[Object(i.jsx)(j.r,{border:"",icon:"user",style:{padding:"10px"}}),Object(i.jsx)("h5",{style:{padding:"5px"},children:e.userHandle})]})}),Object(i.jsx)(j.g,{className:"img-fluid",src:e.imageUrl,waves:!0}),Object(i.jsxs)(j.e,{children:[Object(i.jsx)(j.i,{children:e.itemName}),Object(i.jsxs)(j.h,{children:["Item condition: ",e.itemCondition,Object(i.jsx)("br",{}),"Item ballot status: ",e.itemStatus]}),Object(i.jsx)(j.c,{outline:!0,color:"pink",onClick:()=>t(e.id),children:"View"})]})]}),Object(i.jsx)("br",{})]});var _=({posts:e})=>{let t=t=>{e(t.target.id)};return Object(i.jsxs)(c.Fragment,{children:[Object(i.jsxs)(j.c,{id:"home and living",onClick:t,outline:!0,color:"pink",children:[Object(i.jsx)(j.r,{icon:"utensils",className:"mr-1"})," Home and Living"]}),Object(i.jsxs)(j.c,{id:"sports",outline:!0,color:"pink",onClick:t,children:[Object(i.jsx)(j.r,{icon:"bicycle",className:"ml-1"})," Sports"]}),Object(i.jsxs)(j.c,{id:"electronic",outline:!0,color:"pink",onClick:t,children:[Object(i.jsx)(j.r,{icon:"laptop",className:"mr-1"})," Electronic"]}),Object(i.jsxs)(j.c,{outline:!0,color:"pink",id:"toys",onClick:t,children:[Object(i.jsx)(j.r,{icon:"gamepad",className:"mr-1"})," Toys"]}),Object(i.jsxs)(j.c,{outline:!0,color:"pink",id:"clothes",onClick:t,children:[Object(i.jsx)(j.r,{icon:"tshirt",className:"mr-1"})," Clothes"]}),Object(i.jsxs)(j.c,{outline:!0,color:"pink",id:"luxury",onClick:t,children:[Object(i.jsx)(j.r,{icon:"gem",className:"mr-1"})," Luxury"]}),Object(i.jsxs)(j.c,{outline:!0,color:"pink",id:"automobile",onClick:t,children:[Object(i.jsx)(j.r,{icon:"car-side",className:"mr-1"})," Automobile"]})]})};class M extends c.Component{constructor(...e){super(...e),this.state={FilteredPosts:"",username:localStorage.getItem("username"),usertype:localStorage.getItem("usertype"),itemList:[],search:"",searchResult:[],searchDisplay:!0},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.validateLogin=()=>{this.props.history.push("/logout")},this.onKeyPress=e=>{this.searchitem()},this.searchitem=()=>{var e=this.props.itemlist.filter((e=>"pendingApproval"!==e.itemStatus&&"PendingCollection"!==e.itemStatus&&"Collected"!==e.itemStatus&&e.itemName.toLowerCase().includes(this.state.search)));this.setState({searchResult:e,searchDisplay:!1})},this.Navigate=e=>{this.props.history.push("/itemDetails/"+e)},this.FilterPosts=e=>{const t=this.props.itemlist.filter((t=>t.category==e));this.setState((e=>Object(d.a)(Object(d.a)({},e),{},{FilteredPosts:t})))}}render(){let e;return this.props.itemlist&&(e=this.props.itemlist.filter((e=>"pendingApproval"!==e.itemStatus&&"PendingCollection"!==e.itemStatus&&"Collected"!==e.itemStatus)).map((e=>Object(i.jsxs)(j.n,{size:"4",children:[" ",Object(i.jsx)(F,{viewItem:this.Navigate,post:e})," "]})))),Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{navigate:this.validateLogin}),Object(i.jsx)("br",{}),Object(i.jsx)(j.p,{children:Object(i.jsxs)(j.b,{type:"slideInLeft",duration:"1s",children:[Object(i.jsx)("h3",{children:"Search for items"}),Object(i.jsx)("hr",{}),Object(i.jsx)(j.t,{id:"search",onChange:this.handleChange,onKeyDown:this.onKeyPress,value:this.state.search,label:"Search"}),Object(i.jsxs)(j.E,{children:[0!==this.state.searchResult.length&&this.state.searchResult.map((e=>Object(i.jsx)(j.n,{size:"4",children:Object(i.jsx)(F,{viewItem:this.Navigate,post:e})}))),Object(i.jsx)(j.E,{children:Object(i.jsxs)(j.n,{children:[Object(i.jsx)("h3",{children:" Categories "}),Object(i.jsx)("hr",{}),Object(i.jsx)(_,{posts:this.FilterPosts}),Object(i.jsx)(j.E,{children:this.state.FilteredPosts&&this.state.FilteredPosts.map((e=>Object(i.jsx)(j.n,{size:"4",children:Object(i.jsx)(F,{post:e,viewItem:this.Navigate})})))})]})}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{})]}),this.state.searchDisplay&&Object(i.jsx)(j.E,{children:Object(i.jsxs)(j.n,{children:[Object(i.jsx)("h3",{children:"Popular Listings"}),Object(i.jsx)("hr",{}),Object(i.jsx)(j.E,{children:e})]})}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{})]})}),Object(i.jsx)(u,{})]})}}var q=Object(g.d)(Object(m.b)((e=>({itemlist:e.firestore.ordered.items}))),Object(v.firestoreConnect)([{collection:"items"}]))(M);class B extends c.Component{constructor(...e){super(...e),this.state={username:"",email:"",password:"",cfmpassword:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})}}handleSubmit(){console.log(this.state.customer),this.props.registerUser(this.state.customer)}componentWillReceiveProps(e){0!==e.register&&this.props.history.push("/login")}render(){return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(x,{}),Object(i.jsx)("br",{}),Object(i.jsx)(j.p,{children:Object(i.jsxs)(j.E,{children:[Object(i.jsx)(j.n,{size:"12",children:Object(i.jsx)("h1",{children:"Create a new account!"})}),Object(i.jsx)(j.n,{md:"6",children:Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:"grey-text",children:[Object(i.jsx)(j.t,{label:"Username",id:"username",onChange:this.handleChange,icon:"user-alt",group:!0,type:"text",validate:!0,error:"wrong",success:"right",value:this.state.username}),Object(i.jsx)(j.t,{label:"Email Address",id:"email",icon:"envelope",onChange:this.handleChange,group:!0,type:"email",validate:!0,error:"wrong",success:"right",value:this.state.email}),Object(i.jsx)(j.t,{label:"Password",id:"password",icon:"lock",group:!0,onChange:this.handleChange,type:"password",validate:!0,value:this.state.password}),Object(i.jsx)(j.t,{label:"Confirmed Password",id:"cfmpassword",icon:"lock",onChange:this.handleChange,group:!0,type:"password",validate:!0,value:this.state.cfmpassword})]}),Object(i.jsx)("div",{className:"text-center",children:Object(i.jsx)(j.c,{onlick:this.handleSubmit(this),color:"red",size:"lg",href:"http://localhost:3000/login",children:"Sign Up"})})]})})]})}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var G=Object(m.b)((e=>({register:e.user.response})),{registerUser:e=>t=>{fetch("https://us-central1-secondlove-cc51b.cloudfunctions.net/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(console.log("bro register user response coming in"),!e.ok)throw e;return e.json()})).then((e=>t({type:"USER_REGISTERED",payload:e}))).catch((e=>{console.log(e),e.json().then((e=>{t({type:"SET_ERRORS",payload:e})}))}))}})(B);var H=({profile:e})=>Object(i.jsx)("div",{children:Object(i.jsxs)(j.d,{style:{width:"22rem"},children:[Object(i.jsx)(j.g,{className:"img-fluid",src:e.picture,waves:!0}),Object(i.jsxs)(j.e,{children:[Object(i.jsxs)(j.i,{children:["Name: ",e.name]}),Object(i.jsxs)(j.h,{children:["Email: ",e.email," ",Object(i.jsx)("br",{}),"Location: ",e.location]})]})]})});class J extends c.Component{constructor(...e){super(...e),this.state={bio:"",name:localStorage.getItem("userhandle"),email:localStorage.getItem("username"),picture:localStorage.getItem("image"),location:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.PictureUploaded=e=>{this.setState({picture:e})},this.onSubmitAll=()=>{const e={email:this.state.email,handle:this.state.name,imageUrl:this.state.picture,bio:this.state.bio};this.props.updateProfile(e,localStorage.getItem("userid"))},this.GoBack=()=>this.props.history.push("/")}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{}),Object(i.jsxs)(j.p,{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(j.E,{children:[Object(i.jsx)(j.n,{size:"5",children:Object(i.jsx)(j.b,{type:"slideInLeft",children:Object(i.jsx)(H,{profile:this.state})})}),Object(i.jsx)(j.n,{size:"7",children:Object(i.jsxs)(j.b,{type:"slideInRight",children:[Object(i.jsx)("h3",{children:"Update Profile"}),Object(i.jsx)("hr",{}),Object(i.jsx)(j.t,{id:"name",label:"Name",value:this.state.name,icon:"user",onChange:this.handleChange}),Object(i.jsx)(j.t,{id:"bio",label:"Biography",icon:"user",value:this.state.bio,onChange:this.handleChange}),Object(i.jsx)(j.t,{id:"email",label:"E-mail address",icon:"envelope",value:this.state.email,onChange:this.handleChange}),Object(i.jsx)(j.t,{id:"location",label:"Location",icon:"map-marker",value:this.state.location,onChange:this.handleChange}),Object(i.jsx)(R,{picUpload:this.PictureUploaded}),Object(i.jsxs)(j.E,{children:[Object(i.jsx)(j.n,{size:"6",children:Object(i.jsx)(j.c,{onClick:this.onSubmitAll,outline:!0,color:"pink",className:"m-0 px-3 py-2 z-depth-0",children:"Update Profile"})}),Object(i.jsx)(j.n,{size:"6",children:Object(i.jsx)(j.c,{onClick:this.GoBack,outline:!0,color:"green",className:"m-0 px-3 py-2 z-depth-0",children:"Back"})})]})]})})]})]}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var V=Object(g.d)(Object(m.b)((e=>({user:e.firestore.ordered.users})),{updateProfile:(e,t)=>s=>{p.firestore().collection("users").doc(t).update(Object(d.a)({},e)),s({type:"UPDATE_PROFILE"})}}),Object(v.firestoreConnect)([{collection:"users"}]))(J);const W=({text:e})=>Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png",height:"50",width:"50",alt:""})});class K extends c.Component{render(){return Object(i.jsx)("div",{style:{height:"70vh",width:"100%"},children:Object(i.jsx)(D.a,{bootstrapURLKeys:{key:"AIzaSyA7UYITtdux3_kJzsFhO8r5Mom0bfXgyXU"},defaultCenter:this.props.center,defaultZoom:this.props.zoom,children:this.props.lat&&Object(i.jsx)(W,{lat:this.props.lat,lng:this.props.long,text:this.props.address})})})}}K.defaultProps={center:{lat:1.29,lng:103.85},zoom:11};var X=K;class Y extends c.Component{constructor(...e){super(...e),this.state={itemid:this.props.match.params.itemId},this.ReserveItem=e=>{const t={createdAt:(new Date).toJSON(),itemId:e.id,itemName:e.itemName,recipient:localStorage.getItem("username"),requestStatus:"Pending"};this.props.updateItem(e.id),this.props.addRequest(t),this.props.history.push("/status")},this.GoBack=()=>{this.props.history.push("/")}}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{}),Object(i.jsxs)(j.p,{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(j.E,{children:[this.props.itemlist&&this.props.itemlist.map((e=>Object(i.jsxs)(j.n,{size:"6",children:[Object(i.jsx)("h2",{children:"Item Details"}),Object(i.jsx)("hr",{}),Object(i.jsxs)(j.d,{style:{width:"22rem"},children:[Object(i.jsx)(j.g,{className:"img-fluid",src:e.imageUrl,waves:!0}),Object(i.jsxs)(j.e,{children:[Object(i.jsxs)(j.i,{children:[e.itemName," ",Object(i.jsx)("br",{})," ","Category: "+e.category]}),Object(i.jsxs)(j.h,{children:[e.description," ",Object(i.jsx)("br",{}),e.location]}),("Collected"==e.itemStatus||"PendingCollection"==e.itemStatus)&&Object(i.jsx)(j.c,{onClick:()=>this.ReserveItem(e),outline:!0,color:"pink",disabled:!0,children:" Ordered "}),"Collected"!==e.itemStatus&&"PendingCollection"!==e.itemStatus&&Object(i.jsx)(j.c,{onClick:()=>this.ReserveItem(e),outline:!0,color:"pink",children:" Place Order "})]})]})]}))),Object(i.jsxs)(j.n,{size:"6",children:[Object(i.jsx)("h2",{children:"Item Location"}),Object(i.jsx)("hr",{}),this.props.collectionpoint&&this.props.collectionpoint.map((e=>Object(i.jsxs)("div",{children:[Object(i.jsx)(X,{address:e.Address,lat:e.Coordinates._lat,long:e.Coordinates._long}),Object(i.jsx)("br",{}),"Address: ",e.Address]})))]})]}),Object(i.jsx)(j.c,{outline:!0,color:"green",onClick:this.GoBack,children:"  Back"})]}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var Z=Object(g.d)(Object(m.b)(((e,t)=>{let s=t.match.params.itemId,i=[];if(e.firestore.ordered.items&&e.firestore.ordered.collectionpoint){i=e.firestore.ordered.items;let t=i.filter((e=>e.id===s));console.log("id: "+s),console.log(t);var c=t[0].location;return{itemlist:t,collectionpoint:e.firestore.ordered.collectionpoint.filter((e=>e.Name===c))}}}),{updateItem:e=>t=>{p.firestore().collection("items").doc(e).update({itemStatus:"PendingCollection",recipient:localStorage.getItem("userhandle")}),t({type:"UPDATE_ITEM"})},addRequest:P}),Object(v.firestoreConnect)([{collection:"items"},{collection:"collectionpoint"}]))(Y);class Q extends c.Component{componentDidMount(){localStorage.clear(),this.props.history.push("/login")}render(){return Object(i.jsx)("div",{})}}var $=({myRequest:e,navigate:t,collectItem:s})=>(console.log(e),Object(i.jsxs)(j.F,{children:[Object(i.jsx)(j.H,{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Item Name"}),Object(i.jsx)("th",{children:"Date Requested"}),Object(i.jsx)("th",{children:"Status"}),Object(i.jsx)("th",{children:"View Item"}),Object(i.jsx)("th",{children:"Collected"})]})}),Object(i.jsx)(j.G,{children:e&&e.filter((e=>"PendingCollection"===e.itemStatus&&e.recipient===localStorage.getItem("userhandle"))).map((e=>Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.itemName}),Object(i.jsx)("td",{children:e.createdAt}),Object(i.jsx)("td",{children:e.itemStatus}),Object(i.jsx)("td",{children:Object(i.jsx)(j.c,{size:"sm",onClick:()=>{return s=e.id,void t(s);var s},outline:!0,color:"pink",children:"View Item"})}),Object(i.jsx)("td",{children:Object(i.jsx)(j.c,{size:"sm",onClick:()=>{return t=e.id,void s(t);var t},outline:!0,color:"pink",children:"Collect Item"})})]})))})]}));var ee=({myRequest:e,navigate:t,currentUser:s})=>Object(i.jsxs)(j.F,{children:[Object(i.jsx)(j.H,{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Item Name"}),Object(i.jsx)("th",{children:"Date Requested"}),Object(i.jsx)("th",{children:"Status"}),Object(i.jsx)("th",{children:"View Item"}),Object(i.jsx)("th",{children:"Userhandler"})]})}),Object(i.jsx)(j.G,{children:e&&e.filter((e=>"pendingApproval"===e.itemStatus&&e.userHandle===localStorage.getItem("userhandle"))).map((e=>Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.itemName}),Object(i.jsx)("td",{children:e.createdAt}),Object(i.jsx)("td",{children:e.itemStatus}),Object(i.jsx)("td",{children:Object(i.jsx)(j.c,{size:"sm",onClick:()=>{return s=e.id,void t(s);var s},outline:!0,color:"pink",children:"View Item"})}),Object(i.jsx)("td",{children:e.userHandle})]})))})]});var te=({myRequest:e,navigate:t,collectItem:s})=>(console.log(e),Object(i.jsxs)(j.F,{children:[Object(i.jsx)(j.H,{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Item Name"}),Object(i.jsx)("th",{children:"Date Requested"}),Object(i.jsx)("th",{children:"Status"}),Object(i.jsx)("th",{children:"View Item"})]})}),Object(i.jsx)(j.G,{children:e&&e.filter((e=>"Collected"===e.itemStatus&&e.recipient===localStorage.getItem("userhandle"))).map((e=>Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.itemName}),Object(i.jsx)("td",{children:e.createdAt}),Object(i.jsx)("td",{children:e.itemStatus}),Object(i.jsx)("td",{children:Object(i.jsx)(j.c,{size:"sm",onClick:()=>{return s=e.id,void t(s);var s},outline:!0,color:"pink",children:"View Item"})})]})))})]}));class se extends c.Component{constructor(...e){super(...e),this.state={username:localStorage.getItem("username")},this.Navigate=e=>{this.props.history.push("/itemDetails/"+e)},this.GoBack=()=>{this.props.history.push("/")},this.collectitem=e=>{console.log(e),this.props.collectItem(e)}}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{}),Object(i.jsx)("br",{}),Object(i.jsxs)(j.p,{children:[Object(i.jsx)(j.E,{children:Object(i.jsx)(j.n,{size:"12",children:Object(i.jsxs)(j.b,{type:"slideInDown",children:[Object(i.jsx)("h2",{children:"Items pending collection"}),Object(i.jsx)($,{collectItem:this.collectitem,navigate:this.Navigate,myRequest:this.props.itemlist})]})})}),Object(i.jsx)(j.E,{children:Object(i.jsx)(j.n,{size:"12",children:Object(i.jsxs)(j.b,{type:"slideInDown",children:[Object(i.jsx)("h2",{children:" Items collected"}),Object(i.jsx)(te,{collectItem:this.collectitem,navigate:this.Navigate,myRequest:this.props.itemlist})]})})}),Object(i.jsx)(j.E,{children:Object(i.jsxs)(j.n,{size:"12",children:[Object(i.jsxs)(j.b,{type:"slideInUp",children:[Object(i.jsx)("h2",{children:"Donation items pending for Approval"}),Object(i.jsx)(ee,{navigate:this.Navigate,myRequest:this.props.itemlist})]}),Object(i.jsx)(j.c,{outline:!0,color:"green",onClick:this.GoBack,children:" Back"})]})})]}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var ie=Object(g.d)(Object(m.b)((e=>({itemlist:e.firestore.ordered.items})),{collectItem:e=>t=>{p.firestore().collection("items").doc(e).update({itemStatus:"Collected"}),t({type:"COLLECT_ITEM"})}}),Object(v.firestoreConnect)([{collection:"items"}]))(se);var ce=({myRequest:e,navigate:t,toapprove:s})=>Object(i.jsxs)(j.F,{children:[Object(i.jsx)(j.H,{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Item Name"}),Object(i.jsx)("th",{children:"Image"}),Object(i.jsx)("th",{children:"Description"}),Object(i.jsx)("th",{children:"Conditon"}),Object(i.jsx)("th",{children:"Date Requested"}),Object(i.jsx)("th",{children:"Status"}),Object(i.jsx)("th",{children:"Approval"})]})}),Object(i.jsx)(j.G,{children:e&&e.filter((e=>"pendingApproval"===e.itemStatus)).map((e=>Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.itemName}),Object(i.jsx)("td",{children:Object(i.jsx)("img",{src:e.imageUrl,width:"100",height:"100"})}),Object(i.jsx)("td",{children:e.description}),Object(i.jsx)("td",{children:e.itemCondition}),Object(i.jsx)("td",{children:e.createdAt}),Object(i.jsx)("td",{children:e.itemStatus}),Object(i.jsx)("td",{children:Object(i.jsx)(j.c,{size:"sm",onClick:()=>{return t=e.id,void s(t);var t},outline:!0,color:"pink",children:"Approve"})})]})))})]});class re extends c.Component{constructor(...e){super(...e),this.state={username:localStorage.getItem("username"),usertype:localStorage.getItem("usertype"),itemList:[]},this.ApprovalItem=e=>{(new Date).toJSON();this.props.approveItem(e)},this.Navigate=e=>{this.props.history.push("/itemDetails/"+e)},this.GoBack=()=>{this.props.history.push("/")}}render(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{}),Object(i.jsx)(j.p,{children:Object(i.jsx)(j.E,{children:Object(i.jsxs)(j.n,{children:[Object(i.jsxs)(j.b,{type:"slideInUp",children:[Object(i.jsx)("br",{}),Object(i.jsx)("h2",{children:"Pending Approval"}),Object(i.jsx)("hr",{}),Object(i.jsx)(ce,{navigate:this.Navigate,myRequest:this.props.itemlist,toapprove:this.ApprovalItem})]}),Object(i.jsx)(j.c,{outline:!0,color:"green",onClick:this.GoBack,children:" Back"})]})})}),Object(i.jsx)("br",{}),Object(i.jsx)(u,{})]})}}var oe=Object(g.d)(Object(m.b)((e=>({itemlist:e.firestore.ordered.items})),{approveItem:e=>t=>{p.firestore().collection("items").doc(e).update({itemStatus:"Approved"}),t({type:"APPROVE_ITEM"})},addRequest:P}),Object(v.firestoreConnect)([{collection:"items"}]))(re);class ne extends r.a.Component{render(){return Object(i.jsxs)(a.c,{children:[Object(i.jsx)(a.a,{exact:!0,path:"/",component:q}),Object(i.jsx)(a.a,{path:"/login",component:f}),Object(i.jsx)(a.a,{path:"/listing",component:S}),Object(i.jsx)(a.a,{path:"/ballotItems",component:k.a}),Object(i.jsx)(a.a,{path:"/donation",component:z}),Object(i.jsx)(a.a,{path:"/signup",component:G}),Object(i.jsx)(a.a,{path:"/profile",component:V}),Object(i.jsx)(a.a,{path:"/itemDetails/:itemId",component:Z}),Object(i.jsx)(a.a,{path:"/logout",component:Q}),Object(i.jsx)(a.a,{path:"/status",component:ie}),Object(i.jsx)(a.a,{path:"/approval",component:oe}),Object(i.jsx)(a.a,{render:function(){return Object(i.jsx)("h1",{children:"Not Found"})}})]})}}var le=ne,ae=s(237);const je={categories:[]};var de=(e=je,t)=>{switch(t.type){case"GET_ITEMS":return Object(d.a)(Object(d.a)({},e),{},{items:t.payload});case"UPDATE_ITEM":case"COLLECT_ITEM":case"APPROVE_ITEM":return Object(d.a)({},e);case"SEARCH_ITEM":return Object(d.a)(Object(d.a)({},e),{},{categories:t.payload});case"ITEM_REQUEST":case"ADD_ITEM":case"FETCH_POST":case"GET_COLLECTION_POINTS":return Object(d.a)({},e);default:return e}},he=s(46);const be={loading:!1,credentials:{},requests:[],notifications:[],response:[]};var pe=(e=be,t)=>{switch(t.type){case"SET_AUTHENTICATED":return Object(d.a)(Object(d.a)({},e),{},{response:t.payload});case"SET_UNAUTHENTICATED":return be;case"SET_USER":return Object(d.a)({authenticated:!0,loading:!1},t.payload);case"USER_REGISTERED":return Object(d.a)(Object(d.a)({},e),{},{response:t.payload});case"UPDATE_PROFILE":return Object(d.a)({},e);case"LOADING_USER":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});default:return e}};var me=Object(g.c)({item:de,firestore:he.firestoreReducer,user:pe});const Oe=[ae.a.withExtraArgument({getFirebase:v.getFirebase,getFirestore:he.getFirestore})];var xe=Object(g.e)(me,{},Object(g.d)(Object(g.a)(...Oe),Object(he.reduxFirestore)(p)));class ue extends c.Component{constructor(...e){super(...e),this.state={collapseID:""}}render(){const e=this.state.collapseID;return Object(i.jsx)(m.a,{store:xe,children:Object(i.jsx)(v.ReactReduxFirebaseProvider,{firebase:p,config:b,createFirestoreInstance:he.createFirestoreInstance,dispatch:xe.dispatch,children:Object(i.jsx)(l.a,{children:Object(i.jsxs)("div",{className:"flyout",children:[e&&overlay,Object(i.jsx)("main",{style:{marginTop:"4rem"},children:Object(i.jsx)(le,{})})]})})})})}}var ge=ue;const ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ce(e){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((e=>{console.error("Error during service worker registration:",e)}))}n.a.render(Object(i.jsx)(ge,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const e="".concat("","/service-worker.js");ve?function(e){fetch(e).then((t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):Ce(e)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(e):Ce(e)}))}}()}},[[451,1,2]]]);
//# sourceMappingURL=main.e0fef001.chunk.js.map